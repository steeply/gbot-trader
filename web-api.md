# Описание методов WEB API

## Параметры переменного окружения

* PORT - Порт для доступа к web api
* WEB_AUTH_KEY - ваш ключ авторизации

Описание всех параметров смотрите в README_RU у бота.

Все параметры в методах перечислены в camelCase.

**Важно:**

* Если PORT не указан WEB API не будет запущен.
* Для каждого экземпляра бота используйте свой собственный порт.

## Запросы

* К каждому запросу необходимо в **headers** добавить параметр **auth_key** с указанием ключа авторизации WEB_AUTH_KEY.
* REST JSON формат

## Ответы

* Почти все методы GET возвращают в ответе JSON формат. Кроме методов /start и /stop.
* Все методы PUT, а так же /start и /stop возвращают только статус операции: 200 - ОК или 400 - Bad Request


## Список методов

 Type | Method      | Description
------|-------------|------------
GET | /handbook     | Список каталогов
GET | /config       | Список торговых параметров<br>В этом методе перечислены параметры которые можно менять на ходу, без остановки бота
PUT | /config       | Метод для установки параметров из get /config<br> Можно отправлять как весь список, так и только измененные значения
GET | /settings     | Список параметров для настройки бота<br>В этом методе перечислены параметры которые необходимо задать **до старта торгового бота**
PUT | /settings     | Метод для установки параметров из get /settings
GET | /pair         | Список доступных торговых пар
GET | /balance      | Информация о балансе<br> **full** - Полный доступный баланс аккунта <br> **available** - Баланс доступный боту для торгов после установки всех лимитов <br> **currency** - торговая пара
GET | /orders       | Список открытых ордеров
PUT | /close_orders | Закрыть ордера<br>В body свойство **type** принимает значения "all", "reopen" или "grid"<br> **all** - закрыть все ордера (бот встанет на паузу) <br> **grid** - закрыть только сетку ордеров (бот встанет на паузу) <br> **reopen** - переоткрыть ордера
POST | /closeOrders  | Закрыть ордера<br> В body свойство **type** принимает значения "all", "buy", "sell"<br> **all** - закрыть все ордера<br> **buy** - закрыть buy ордера <br> **sell** - закрыть sell ордера<br><br> Свойство **reset** - сбросить сетку ордеров (true/false)
POST | /setOrder     | Установить ордер.<br> В body свойства **type** - тип ордера buy/sell, **rate** - цена, **amount** - количество
GET | /ticker       | Информация о котировке торгуемой пары
GET | /history      | История торгов
GET | /summary      | Сборная информация о состоянии внутренних переменных (Баланс, котировки, ордера, история и т.д)
POST | /candles     | Информация о свечах<br> В body свойство **periods** указывается период свечи, **after** - с какой даты (timestamp) делать загрузку свечей.
GET | /status       | Статус бота ( pause: true / false )
PUT | /status       | Изменить статус<br> В body свойство **pause** принимает значение **true** или **false**
GET | /start        | Старт торгового бота
GET | /stop         | Стоп торгового бота
GET | /license      | Информация о лицензии
GET | /logs         | Лог бота


**Важно:**

* Методы **/balance, /orders, /ticker, /license** возвращают кешированное значения внутренних переменных бота. Т.е. эти методы не дергают непосредственно api биржи.
* Если необходимо сначала запустить бота без начала торговли, запускайте с параметром переменного окружения BOT_TRADE=false
Затем этот параметр можете изменить в /settings 
* Если не указан параметр EXCHANGE, запустится только WEB API, без старта торгового бота.
